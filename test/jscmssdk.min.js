!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).JscmsSdk=t()}(this,function(){"use strict";var config={asyncDependence:[{variable:"",type:"css",version:"latst",url:"https://cdn.jsdelivr.net/npm/heyui/themes/index.css"},{variable:"Vue",type:"js",version:"latest",url:"https://cdn.jsdelivr.net/npm/vue"},{variable:"HeyUI",type:"js",version:"latest",url:"https://cdn.jsdelivr.net/npm/heyui"}]};function cssLoader(e,t,n){void 0===e&&(e=""),void 0===t&&(t=function(){}),void 0===n&&(n="");var i=document.createElement("link"),o="onload"in i,a=536>+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/?(\d+).*/i,"$1"),s=3e5;function c(){i.onload=i.onerror=i.onreadystatechange=null,i=null,t()}i.rel="stylesheet",i.type="text/css",i.href=e,void 0!==n&&(i.id=n),document.getElementsByTagName("head")[0].appendChild(i),!a&&o?o?(i.onload=c,i.onerror=function(){c()}):i.onreadystatechange=function(){/loaded|complete/.test(i.readyState)&&c()}:setTimeout(function(){!function e(t,n,i){var o=t.sheet;var c=!1;i+=1;if(i>s)return c=!0,t=null,void n();if(a)o&&(c=!0);else if(o)try{o.cssRules&&(c=!0)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(c=!0)}setTimeout(function(){c?n():e(t,n,i)},20)}(i,t,0)},1)}function jsLoader(e,t,n){void 0===e&&(e=""),void 0===t&&(t=function(){}),void 0===n&&(n="");var i=document.getElementsByTagName("head")[0],o=document.createElement("script");o.type="text/javascript",o.src=e,n&&(o.id=n),"function"==typeof t&&(o.onload=o.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||("function"==typeof t&&t(),o.onload=o.onreadystatechange=null)}),i.appendChild(o)}function ajax(e){var t=null,n=function(e){var t=[];for(var n in e)t.push(n+"="+e[n]);return t.join("&")}(e.data);t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),"GET"==e.type?(t.open(e.type,e.url+"?"+n,e.async),t.send(null)):"POST"==e.type&&(t.open(e.type,e.url,e.async),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send(n)),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&e.success(t.responseText)}}function vueLoader(url,callback){void 0===url&&(url=""),void 0===callback&&(callback=function(){});var templateReg=/<template>([\d\D]*)?<\/template>/gim,scriptReg=/<script>([\d\D]*)?<\/script>/gim,styleReg=/<style>([\d\D]*)?<\/style>/gim;ajax({url:url,type:"GET",success:function success(res){var template=templateReg.exec(res)[1],script=scriptReg.exec(res)[1],style=styleReg.exec(res)[1],obj=eval("("+script.replace("export default {","function () { return {")+"})()"),component=Object.assign({style:style,template:template},obj);callback(component)}})}function asyncRequire(e,t){void 0===t&&(t=function(){});var n="string"==typeof e?[e]:e,i=n.length;n.forEach(function(e){var n=e.url,o=function(e,t){};switch(e.type){case"css":o=cssLoader;break;case"vue":o=vueLoader;break;default:o=jsLoader}o(n,function(){--i>0||t()})})}function styleLoader(e,t){void 0===e&&(e=""),void 0===t&&(t="");var n=document.createElement("style");n.type="text/css",t&&(n.id=t);try{n.appendChild(document.createTextNode(e))}catch(t){n.styleSheet.cssText=e}document.getElementsByTagName("head")[0].appendChild(n)}var vueComponentDialogQrcode={template:'<div class="vue-qrcode">\n  <Modal v-model="opened" className="">\n    <div style="padding: 10px; text-align: center;">{{title}}</div>\n    <div class="vue-qrcode-warp" :style="warpStyle">\n      <div class="item" v-for="(item, index) in images" :key="index">\n        <div><img class="vue-qrcode-image" v-show="item.url" :src="item.url" :alt="item.desc"></div>\n        <span v-show="item.desc">{{item.desc}}</span>\n      </div>\n    </div>\n  </Modal>\n</div>\n',style:"img.vue-qrcode-image {\n  width: 230px;\n  height: 230px;\n}\n\n.vue-qrcode-warp {\n  text-align: center;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  min-width: 350px;\n}\n\n.vue-qrcode-warp .item {\n  display: inline-block;\n}\n",name:"Qrcode",data:function(){return{baseWidth:240,warpStyle:{width:"230px"},title:"扫一扫",images:[],opened:!1}},methods:{show:function(e){this.title=e.title,this.images=e.images,this.warpStyle.width=e.images.length*this.baseWidth+"px",console.log(this.warpStyle),this.opened=!0}}},vueComponentComment={template:'<div class="jscms-comment">\n  <div class="comment-input-area">\n    <div class="comment-top">\n      <div class="comment-title">参与评论</div>\n      <div class="comment-total">共0条</div>\n    </div>\n  </div>\n  <div class="comment-list"></div>\n</div>\n',style:'.jscms-comment {\n  width: 100%;\n}\n\n.jscms-comment .comment-input-area {\n  width: 100%;\n}\n\n.jscms-comment .comment-input-area .comment-top::after {\n  content: ".";\n  display: block;\n  height: 0;\n  clear: both;\n  visibility: hidden;\n}\n\n.jscms-comment .comment-input-area .comment-top {\n  width: 100%;\n  padding: 10px;\n  box-sizing: border-box;\n}\n\n.jscms-comment .comment-input-area .comment-top .comment-title {\n  float: left;\n}\n\n.jscms-comment .comment-input-area .comment-top .comment-total {\n  float: right;\n}\n',name:"Comment",data:function(){return{}},methods:{}},JscmsSdk=function(){function e(e){void 0===e&&(e={}),this.loader={css:cssLoader,js:jsLoader,vue:vueLoader,style:styleLoader}}var t=e.prototype;return t._mountApi=function(){var e=this;this.comment={},this.comment.render=function(t){var n=e._createDiv("",document.querySelector(t));return e._initVue({component:vueComponentComment,selector:"#"+n.id,id:e._id()})},this.dialog={};var t=this._createDiv();this.dialog.qrcode=this._initVue({component:vueComponentDialogQrcode,selector:"#"+t.id,id:t.id})},t._createDiv=function(e,t){void 0===e&&(e=""),void 0===t&&(t=document.body);var n=document.createElement("div");return n.id=e||this._id(),t.appendChild(n),n},t._id=function(){return"id_"+Math.random().toString(36).substr(2)},t._initVue=function(e){var t=e.component,n=e.selector;return styleLoader(t.style,"vueStyle_"+e.id),new Vue(Object.assign({el:n},t))},t.init=function(e){var t=this;asyncRequire(config.asyncDependence,function(){t._mountApi(),e.call(t)})},e}();return JscmsSdk});
